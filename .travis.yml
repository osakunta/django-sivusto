language: node_js

node_js:
  - 15

services:
  - docker

before_install:
  - make login build

script:
  - npm install
  - npm run build
  - make test

deploy:
  provider: script
  script: make push
  on:
    branch: master

notifications:
  slack: $SLACK_TOKEN
